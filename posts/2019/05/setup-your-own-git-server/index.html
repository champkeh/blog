<!doctype html><html><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>搭建自己的git服务器 - champ的个人博客</title>
<meta name=author content>
<meta name=description content>
<meta name=keywords content>
<link rel=stylesheet href=/css/style.min.5c11f038b4e260f640db314c292401547f46a29292254b93638b363b69a47e2f.css>
<link rel=stylesheet href=/css/syntax.min.css>
</head>
<body>
<div id=container class=container>
<header id=header>
<div class=wrapper>
<button class=round-left onclick="location.href='/'"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" aria-label="主页图标" class="css-ggaxow ellz05y0" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346.0L23 11h-3v9a1 1 0 01-1 1zM6 19h12V9.157l-6-5.454-6 5.454V19z"/></g></svg>
回到主页</button>
<button class=round-right><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" aria-label="文章目录" class="css-ggaxow ellz05y0" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"/><path d="M20 22H4a1 1 0 01-1-1V3a1 1 0 011-1h16a1 1 0 011 1v18a1 1 0 01-1 1zm-1-2V4H5v16h14zM8 7h8v2H8V7zm0 4h8v2H8v-2zm0 4h8v2H8v-2z"/></g></svg>
目录</button>
</div>
</header>
<main id=main>
<article class=post-single>
<header>
<h1>搭建自己的git服务器</h1>
<span class=summary>环境: server: ubuntu 16.4 第一步，安装git: sudo apt-get install git 第二步，创建一个git用户，用来运行git服务： sudo adduser git 第三步，创建证书登录： 收集所有需要登录的用户的</span>
<div class=meta>
<time><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" aria-label="日期图标" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"/><path d="M17 3h4a1 1 0 011 1v16a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1h4V1h2v2h6V1h2v2zm-2 2H9v2H7V5H4v4h16V5h-3v2h-2V5zm5 6H4v8h16v-8z"/></g></svg>
编辑于 2019 年 05 月 10 日
</time>
<a href=https://creativecommons.org/licenses/by-sa/4.0/deed.zh target=_blank rel="noopener noreferrer"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" aria-label="版权图标" height="1.125em" width="1.125em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"/><path d="M12 2c5.52.0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zm0 2c-4.42.0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 3c1.82.0 3.413.973 4.288 2.428l-1.714 1.029A3 3 0 1012 15a2.998 2.998.0 002.573-1.456l1.715 1.028A4.999 4.999.0 017 12c0-2.76 2.24-5 5-5z"/></g></svg>
CC-BY-SA-4.0
</a>
</div>
</header>
<aside>
<h2>Table of Contents</h2>
<nav id=TableOfContents></nav>
</aside>
<section class=body>
<p>环境:
server: ubuntu 16.4</p>
<p>第一步，安装git:
sudo apt-get install git</p>
<p>第二步，创建一个git用户，用来运行git服务：
sudo adduser git</p>
<p>第三步，创建证书登录：
收集所有需要登录的用户的公钥，导入到 /home/git/.ssh/authorized_keys 文件中，一行一个。</p>
<p>第四步，初始化git裸仓库：
cd /srv
sudo git init &ndash;bare blog.git
sudo chown -R git:git blog.git</p>
<p>第五步，禁用shell登录：
编辑 /etc/passwd 文件，如下：</p>
<pre tabindex=0><code class=language-passwd data-lang=passwd>git❌1001:1001:,,,:/home/git:/bin/bash
git❌1001:1001:,,,:/home/git:/user/bin/git-shell
</code></pre><p>第六步，克隆远程仓库：
git clone git@server:/srv/blog.git</p>
<p>第七步，设置本地仓库的origin：
如果先有本地仓库，后有服务器的裸仓库，可以设置本地仓库的origin:</p>
</section>
<section class=related>
</section>
Next: <a href=/posts/2019/05/nodejs-learn-note/>Page(/posts/2019/05/nodejs-learn-note.md)</a>
<section class=comments>
<h3>Comments</h3>
</section>
</article>
</main>
</div>
</body>
</html>